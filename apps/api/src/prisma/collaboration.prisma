enum CollaborationStatus {
  requested
  active
  rejected
  ended
}

model Collaboration {
  id                          String              @id
  patientId                   String
  requesterProfessionalId     String
  collaboratorProfessionalId  String?
  collaboratorEmail           String?
  treatmentId                 String?
  purposeSpecialty            String
  purposeDescription          String?
  scopeCanViewClinicalRecords Boolean
  scopeCanAddNotes            Boolean
  scopeCanSuggestTreatment    Boolean
  scopeCanAccessForms         Boolean
  periodFrom                  DateTime
  periodTo                    DateTime?
  status                      CollaborationStatus @default(requested)
  createdAt                   DateTime            @default(now())
  updatedAt                   DateTime            @updatedAt
  acceptedAt                  DateTime?
  rejectedAt                  DateTime?
  endedAt                     DateTime?

  @@index([patientId])
  @@index([requesterProfessionalId])
  @@index([collaboratorProfessionalId])
  @@index([treatmentId])
}
